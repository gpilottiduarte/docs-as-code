# How to make an SSH Multihop connection via Terminal Proxy

In this document, you’ll find a step-by-step guide on how to make an SSH connection with Multihop via Terminal Proxy.

This type of access is used to facilitate access to the target device in applications that don’t provide interactive prompts and to perform access by skipping the senhasegura shell step. Multihop serves to connect directly to the destination without the need to perform additional steps.

## Requirements

* Have a command prompt-type application installed.

---
## Access using multihop
Use the following syntax depending on the desired access, replacing the strings with the values ​​described in the table below:
**String**|**Description**
|---|---|
`senhasegura_user`|User of the senhasegura vault.
`senhasegura_vault`|Hostname or IP address of the senhasegura vault.
`credential`|User’s credential you want to use for access.
`target_device`|Hostname or IP address of the device you want to access.
`domain`|Domain name associated with the device or credential.
`mfa_token`|Code generated by MFA Token.

:::(warning) (**Attention**)
When your password is reset or expires, the terminal will display a message warning that the password needs to be changed and display the steps that the user must take to register a new password through the web interface.
:::

#### Standard connection only with the user and the senhasegura server:
`ssh senhasegura_user@senhasegura_vault`

#### Multihop connection containing the user and the destination server:
In this example, senhasegura will connect directly to the target server without handing over the intermediate endpoint. The credential and target device are in square brackets
`ssh senhasegura_user[credential@target_device]@senhasegura_vault`

To access the device or when a key and a credential have the same name, using the SSH key, making multihop connections.

`ssh senhasegura_user[key\credential@target_device]@senhasegura_vault`

:::(warning) (**Attention**)
When accessing another device with an SSH key, always use the word `key\`.
:::

#### Multihop connection using domain credentials:
`ssh senhasegura_user[domain\credential@target_device]@senhasegura_vault`

:::(info) (**Info**)
To learn how to configure a domain, access the How to use domain credentials document.
:::

#### Multihop connection containing the OTP token:
`ssh senhasegura_user[credential@target_device]mfa_token@senhasegura_vault`

---
## Multi-tenant access
Multi-tenant access is only possible through Proxy 2.0. To enable it, access the document [How to manage proxy settings - Enable Proxy 2.0](/v3-33/docs/orbit-cli-how-to-manage-the-proxy-system-settings) to perform this action.

:::(warning) (**Attention**)
If the tenant isn’t informed, the system will consider the senhasegura tenant.
:::

#### Multihop connection with Multi-tenant:
`senhasegura_user[credential@target_device]%tenant_name@senhasegura_vault`

#### Multihop SSH key connection with Multi-tenant:
`senhasegura_user[key\credential@target_device]%tenant_name@senhasegura_vault`

#### Multihop domain credential connection with Multi-tenant:
`senhasegura_user[domain\credential@target_device]%tenant_name@senhasegura_vault`

#### Multihop connection with MFA (TOTP) with Multi-tenant:
`senhasegura_user[credential@target_device]mfa_token%tenant_name@senhasegura_vault`

---
## Access using Proxy 2.0
When accessing a device with **more than one** connectivity type registered through Proxy 2.0 using Terminal Proxy, users will be presented with a protocol selection screen, the options being SSH or Telnet.

1. Open the command prompt app of your preference.
2. Type in the access data:
    1. `ssh senhasegura_user[credential@target_device]@senhasegura_vault`
3. Follow the steps described in the SSH Connection section.
4. On the senhasegura shell home screen, type in the desired connectivity option:
    1. SSH port **22**, type `1`, and press **Enter**.
    2. Telnet port **23**, type `2`, and press **Enter**.
5. After choosing, type:
    1. `ssh credential@hostname` or `ssh credential@IP` for SSH connectivity.
    2. `telnet credential@hostname` or `telnet credential@IP` for Telnet connectivity.
6. Press **Enter**.

If the **protocol** and **port** are already specified, the connection will happen automatically:
`ssh senhasegura_user[credential@target_device{ssh.22}]@senhasegura_vault -p 22`

After these steps, the connection to a device is ready for use.

---
The senhasegura Terminal Proxy also offers other types of connections, such as:

* [SSH connection via Terminal Proxy ](/v3-33/docs/pam-session-how-to-make-an-ssh-connection-via-terminal-proxy)
* [TELNET connection via Terminal Proxy](/v3-33/docs/pam-session-how-to-make-a-telnet-connection-via-terminal-proxy)
* [Transfer files in Terminal Proxy sessions via SFTP](/v3-33/docs/pam-session-how-to-transfer-a-file-in-terminal-proxy-sessions-using-sftp)
* [Transfer files in Terminal Proxy sessions via SCP](/v3-33/docs/pam-session-how-to-transfer-a-file-in-terminal-proxy-sessions-using-scp)


Do you still have questions? Reach out to the [senhasegura Community](https://community.senhasegura.io/){target=`_blank`}.