<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Segura API Reference</title>
    <link rel="stylesheet" href="styles.css">
    <!-- ReDoc Styles -->
    <style>
        body {
            margin: 0;
            padding: 0;
            height: 100%;
            overflow: hidden;
        }
        
        .api-container {
            display: flex;
            flex-direction: column;
            height: calc(100vh - 70px);
        }
        
        redoc {
            display: block;
            height: 100%;
            width: 100%;
            overflow: auto;
        }
        
        /* Customiza√ß√£o para ReDoc */
        :root {
            --redoc-font-regular: 'Segoe UI', system-ui, -apple-system, sans-serif;
            --primary-color: #00B29A;
            --text-color: #003330;
            --secondary-color: #00766C;
        }
        
        .back-to-docs {
            margin-left: auto;
        }
        
        /* Vers√µes dropdown espec√≠fico para a p√°gina de API */
        #apiVersionSelect {
            min-width: 100px;
        }
    </style>
</head>
<!-- Preview Banner -->
<body>
<div style="position:fixed; top:0; left:0; right:0; background:#ff9800; color:white; text-align:center; padding:8px; z-index:9999; font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;">
  üîç Preview da PR #2 - 
  <a href="https://github.com/gpilottiduarte/docs-as-code/pull/2" style="color:white; text-decoration:underline;">Voltar para PR</a>
</div>
    <nav class="navbar">
        <div class="navbar-content">
            <div class="company-name">Segura API</div>
            <div class="dropdowns-container">
                <select id="apiVersionSelect" class="dropdown">
                    <option value="v1">v1.0</option>
                    <option value="v2">v2.0</option>
                    <option value="v3">v3.0</option>
                    <option value="v4" selected>v4.0</option>
                </select>
                <a href="index.html" class="api-btn back-to-docs">Documenta√ß√£o</a>
            </div>
        </div>
    </nav>
    
    <div class="api-container">
        <redoc spec-url="api-specs/v4.yaml"></redoc>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/redoc@next/bundles/redoc.standalone.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const versionSelect = document.getElementById('apiVersionSelect');
            
            // Obter a vers√£o dos par√¢metros da URL ou usar a padr√£o
            const urlParams = new URLSearchParams(window.location.search);
            const currentVersion = urlParams.get('version') || 'v4';
            versionSelect.value = currentVersion;
            
            // Atualizar a especifica√ß√£o da API quando a vers√£o mudar
            versionSelect.addEventListener('change', (e) => {
                const newVersion = e.target.value;
                
                // Atualizar URL com o par√¢metro de vers√£o
                const newUrl = new URL(window.location.href);
                newUrl.searchParams.set('version', newVersion);
                window.history.pushState({}, '', newUrl);
                
                // Recarregar a p√°gina com a nova vers√£o da especifica√ß√£o
                const redocElement = document.querySelector('redoc');
                redocElement.setAttribute('spec-url', `api-specs/${newVersion}.yaml`);
                redocElement.dispatchEvent(new CustomEvent('reload'));
            });
            
            // Definir a URL inicial da especifica√ß√£o
            document.querySelector('redoc').setAttribute('spec-url', `api-specs/${currentVersion}.yaml`);
        });
    </script>
</body>
</html>