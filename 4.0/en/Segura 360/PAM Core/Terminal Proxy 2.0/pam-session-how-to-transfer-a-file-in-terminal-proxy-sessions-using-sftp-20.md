# How to transfer a file in Terminal Proxy sessions using SFTP 2.0

This document provides information about a step-by-step guide on how to perform file transfer using SFTP in remote Terminal Proxy sessions.

:::(warning) (**Attention**)  
Some SSH tools, such as MobeXterm, automatically set an SFTP connection to transfer files after logging in with SSH. These SFTP connections **won’t work**, as the Segura proxy treats them separately.  
:::

## Requirements

* Terminal Proxy type credential active.  
* Start a connection via Multihop Terminal Proxy.

:::(info) (**Info**)  
To transfer files directly to a destination server using SFTP, you must use the **Multihop** connection because binaries traveling under SFTP have no way to interact with the intermediate terminal.  
:::

---
## Transfer via SFTP on the terminal  
Due to the protocol limitations,the user **can’t** use a personal credential to perform the file transfer. Only with a credential registered in Segura will it be possible to perform the transfer.

Also, it won’t be possible to record the session, but it’s still possible to enable logging with a report of transferred files. To learn how to enable this log, access the *File transfer* document.

To start, follow the steps and replace the strings with the values ​​described in the table below.

| **String** | **Description** |
| :---- | :---- |
| **senhasegura_user** | User of the Segura vault. |
| **senhasegura_vault** | Hostname or IP address of the Segura vault. |
| **credential** | Credential user you want to use for access. |
| **target_device** | Hostname or IP address of the device you want to access. |
| **mfa_token** | Code generated by MFA Token. |
| **file_name** | Name of the file to be transferred. |

## Access using New Proxy  
Using the New Proxy when transferring files via the Terminal Proxy in which the accessed device has **more than one** type of registered connectivity, the user will have to inform the protocol that will be used and the port to make the connection.

1. Open the application **command prompt** of your preference.  
   1. Enter `sftp senhasegura_user[credential@target_device{ssh.22}]@senhasegura_vault`  
   2. If the use of the **token OTP** is enabled, it must be inserted before the Segura vault: `sftp senhasegura_user[credential@target_device{ssh.22}]token@senhasegura_vault`.  
   3. For use with **multi-tenant**, the tenant name must be included after the Segura user: `sftp senhasegura_user%tenant_namecredential@target_device{ssh.22}]@senhasegura_vault`  
2. Use the commands below to:  
   1. Carry out the **upload** from a file, type:  
      1. `put [file_name]`  
      2. Press the **Enter** key to start the action.  
      3. When the file is complete, a message `<file_name> 100%` will be displayed.  
   2. Carry out the **download** from a file, type:  
      1. `get [file_name]`  
      2. Press the **Enter** key to start the action.  
      3. When the file is complete, a message `<file_name> 100%` will be displayed.  
3. When finished, type:  
   1. `exit`

:::(info) (**Info**)  
If the user has an OTP token configured, use the token in the connection string. `sftp senhasegura_user[credential@target_device]mfa_token@senhasegura_vault`.  
:::

The Segura Terminal Proxy also offers another type of file transfer via SCP, to find out how to perform this, access the [How to transfer a file in Terminal Proxy sessions using SCP 2.0](/v4/docs/pam-session-how-to-transfer-a-file-in-terminal-proxy-sessions-using-scp-20) document.

---
Do you still have questions? Reach out to the [Segura Community](https://community.Segura.io/){target=`_blank`}.